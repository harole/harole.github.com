---
layout: post
title: "input ie6,7下双边距问题"
date: 2013-05-19 10:46
comments: true
categories: CSS 
---
一. 先来看 input 产生的几个问题。

情况一：

---------------
    
    <!doctype html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>test</title>         

        <style type="text/css">

        /* 去除默认的 padding 和 margin */
        * {
            margin: 0;
            padding: 0;
        }

        .has-margins {
            background-color: gray;
            margin-left: 5em;        
        }
        .has-layout {
            background-color: tan;
            width: 30em;
        }
        </style>
    </head>
    <body>
        <form action="ignore">            
            <div class="has-margins">
                <div class="has-layout">
                    INPUT tag, type=text:<br>
                    <input type="text"><br>
                    INPUT tag, type=checkbox:<br>
                    <input type="checkbox">
                </div>
            </div>
        </form>      

        <!-- 注释2 -->
        <!-- <form action="ignore">            
            <div class="has-margins">
                <div class="has-margins">
                    <div class="has-layout">
                        INPUT tag, type=text:<br>
                        <input type="text"><br>
                        INPUT tag, type=checkbox:<br>
                        <input type="checkbox">
                    </div>
                </div>
            </div>
        </form> --> 
    </body>
    </html>
ie6，7 下 input 和 .has-margin 之间多了 80px（即 .box 的 margin-left 的同时也复制给了 input），如下图:

![all have content]({{ root_url }}/images/2013-05-19-input-ie67.png)
<!-- more -->
如果将之前的form注释掉，使用注释二中的代码，会得到下图：

![all have content]({{ root_url }}/images/2013-06-02-input-ie67-01.png)

出现上述bug的原因是，.has-layout 中的 CSS “width: 30em” 出发了 haslayout 让 input 具有继承所有祖先元素的 margin-left 的总和的特性！所以有了上述情况，同理可以将 “width: 30em” 换成 “zoom: 1;”等触发 haslayout ，可以达到同样的结果！

解决方案：

1.  方案一：
    在 input 前加上文本，或是加上 label 元素等行内元素。这也是我们很少发现 bug 的原因，一般而言我们都在 input 的前加上了 label 元素。
    <form action="ignore">
        <div class="has-margins">
          <div class="has-layout">
            INPUT tag, type=text, preceeded by inline text:<br>
            Text: <input type="text"><br>
            <label for="">Text:</label> <input type="text"><br>
          </div>
        </div>
    </form>



2.  方案二：
    给 input 元素包上 span等，只要是没有触发 haslayout 的元素皆可。
    <form action="ignore">
        <div class="has-margins">
          <div class="has-layout">
            INPUT tag, type=text, preceeded by inline text:<br>
            Text: <input type="text"><br>
            <span><input type="text"></span><br>
          </div>
        </div>
    </form>


3.  注：并不是所有的 input 元素都会产生此 bug，也许你已经发现前面的 checkbox 就没有此 bug，还有radio，image inputs 会打破 haslayout 因此不会产生 bug！



__原文请链接:__<http://www.positioniseverything.net/explorer/inherited_margin.html>